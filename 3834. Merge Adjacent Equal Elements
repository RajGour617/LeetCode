import java.util.*;

class Solution {
    public List<Long> mergeAdjacent(int[] nums) {
        int n = nums.length;

        // Array used as stack
        long[] stack = new long[n];
        int top = -1;

        for (int num : nums) {
            long curr = num;

            // Merge while top equals current
            while (top >= 0 && stack[top] == curr) {
                curr += stack[top];
                top--;
            }

            stack[++top] = curr;
        }

        // Convert stack array to List<Long>
        List<Long> result = new ArrayList<>();
        for (int i = 0; i <= top; i++) {
            result.add(stack[i]);
        }

        return result;
    }
}
